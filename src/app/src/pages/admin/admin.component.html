<app-header></app-header>
<!-- Main content -->
<section class="content">
  <div class="m-2">
    <div class="row">
      <div class="col-12 col-sm-12">
        <div class="card card-light card-tabs">
          <div class="card-header p-0 pt-1">
            <ul class="nav nav-tabs">
              <li class="nav-item">
                <a class="nav-link active" data-toggle="pill" href="#asistencia-crud">Asistencia</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="pill" href="#custom-tabs-one-empleado">Empleado</a>
              </li>
            </ul>
          </div>
          <div class="card-body">
            <div class="tab-content">
              <div class="tab-pane fade show active" id="asistencia-crud">
                <!-- asistencia crud -->
                <div class="tab-pane">
                  <div class="row">
                    <div class="col-12 col-sm-12">
                      <div class="card card-light card-tabs">
                        <div class="card-header p-0 pt-1">
                          <ul class="nav nav-tabs">
                            <li class="nav-item">
                              <a class="nav-link active listaAsistenciaBtn" data-toggle="pill" href="#alce">Listado</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link " data-toggle="pill" href="#accr">Crear</a>
                            </li>
                            <li class="nav-item">
                              <a class="nav-link actualizar-crud-asistencia-btn" data-toggle="pill"
                                href="#aucr">Actualizar</a>
                            </li>
                          </ul>
                        </div>
                        <div class="card-body">
                          <div class="tab-content">
                            <div class="tab-pane fade show active" id="alce">
                              <div class="hed">
                                <!-- <select class="form-select" name="" id=""   style="max-width: 200px;">
                                  <option [value]="item" *ngFor="let item of listadoEmpleado">{{item}}</option>
                                </select> -->
                                <!-- <input type="text" class="input_ezb" placeholder="Buscar.." [(ngModel)]="filterpost"
                                  name="filterpost" /> -->
                                <button class="btn btn-success" style="max-width: 200px;" (click)="exportToExcel()">Export to
                                  Excel</button>
                              </div>
                              <div class="table-responsive">
                              <table *ngIf="asistencias!=null" id="asistencia-excel" class="table">
                                <thead>
                                  <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">FECHA</th>
                                    <th scope="col">NOMBRE</th>
                                    <th scope="col">IMAGEN</th>
                                    <th scope="col">TIPO</th>
                                    <th scope="col">IDENTIFICADOR</th>
                                    <th scope="col">EDITAR</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr
                                    *ngFor="let fila of asistencias | paginate: { itemsPerPage: 10, currentPage: po }| filter:filterpost:['nombre','fecha','identificador','tipo']; let i = index">
                                    <td>{{fila.id}}</td>
                                    <!-- |date:'short' -->
                                    <td>{{fila.fecha|date:'short'}}</td>
                                    <td>{{fila.nombre}}</td>
                                    <td *ngIf="fila.imagen"><a  style="cursor: pointer;"
                                        (click)="mostrarImagen(fila.imagen)"><img width="50"
                                          [src]="fila.imagen |imagen"></a></td>
                                    <td *ngIf="!fila.imagen"><a><img width="50" src="./../../../../assets/dist/img/userDefault.jpg"></a></td>
                                    <td>{{fila.tipo}}</td>
                                    <td *ngIf="fila.identificador=='SALIDA'"><span
                                        class="badge badge-pill badge-danger">{{fila.identificador}}</span></td>
                                    <td *ngIf="fila.identificador=='ENTRADA'"><span
                                        class="badge badge-pill badge-success">{{fila.identificador}}</span></td>
                                    <td><a style="cursor: pointer;" (click)="openEditAsistencia(fila)"><i
                                          class="bi bi-pencil-square"></i></a></td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                              <pagination-controls (pageChange)="po = $event"></pagination-controls>
                            </div>
                            <div class="tab-pane fade show" id="accr">
                              <app-asistencia-form (AsistenciaUpdate)="enviarAsistencia($event,false)" [crud]="false">
                              </app-asistencia-form>
                            </div>
                            <div class="tab-pane fade show" id="aucr">
                              <app-asistencia-form (AsistenciaUpdate)="enviarAsistencia($event,true)" [crud]="true"
                                [asistencia]="asistencia"></app-asistencia-form>
                            </div>
                          </div>
                        </div>
                        <!-- /.card -->
                      </div>
                    </div>
                  </div>
                </div>

                <!-- asistencia crud -->
              </div>
              <div class="tab-pane fade" id="custom-tabs-one-empleado">
                <div class="row">
                  <div class="col-12 col-sm-12">
                    <div class="card card-light card-tabs">
                      <div class="card-header p-0 pt-1">
                        <ul class="nav nav-tabs">
                          <li class="nav-item">
                            <a class="nav-link active listadoEmpleadoCrud" (click)="ListarEmpleado()" data-toggle="pill"
                              href="#lce">Listado</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link " data-toggle="pill" href="#ccr">Crear</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link actualizar-crud-empleado-btn" data-toggle="pill"
                              href="#ucr">Actualizar</a>
                          </li>
                        </ul>
                      </div>
                      <div class="card-body">
                        <div class="tab-content">
                          <div class="tab-pane fade show active" id="lce">
                            <div class="table-responsive">
                            <table *ngIf="empleados!=null" class="table">
                              <thead>
                                <tr>
                                  <th scope="col" style="width: 60px;">ID</th>
                                  <th scope="col">NOMBRE</th>
                                  <th scope="col">NUMERO DOCUMENTO</th>
                                  <th scope="col">TIPO DOCUMENTO</th>
                                  <th scope="col">LOCAL</th>
                                  <th scope="col">EDITAR</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr
                                  *ngFor="let fila of empleados |paginate: { itemsPerPage: 10, currentPage: empleado_p}">
                                  <td>{{fila.id}}</td>
                                  <td>{{fila.nombre}}</td>
                                  <td>{{fila.num_doc}}</td>
                                  <td>{{fila.tipo_doc}}</td>
                                  <td>{{fila.descripcion}}</td>
                                  <td><a style="cursor: pointer;" (click)="openEdit(fila)"><i
                                        class="bi bi-pencil-square"></i></a></td>
                                </tr>
                              </tbody>
                            </table>
                            </div>
                            <pagination-controls (pageChange)="empleado_p = $event"></pagination-controls>
                            <!-- <pagination-controls (pageChange)="p = $event"></pagination-controls> -->
                          </div>
                          <div class="tab-pane fade show" id="ccr">
                            <app-empleado-crud (empleadoUpdate)="enviar($event,false)" [crud]="false">
                            </app-empleado-crud>
                          </div>
                          <div class="tab-pane fade show" id="ucr">
                            <app-empleado-crud (empleadoUpdate)="enviar($event,true)" [empleado]="empleado"
                              [crud]="true">
                            </app-empleado-crud>
                          </div>
                        </div>
                      </div>
                      <!-- /.card -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- /.card -->
        </div>
      </div>
    </div>
  </div>
</section>
